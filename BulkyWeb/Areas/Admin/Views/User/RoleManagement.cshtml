@model RoleManagementVM  
<div class="card shadow border-0 mt-4">  
   <div class="card-header bg-secondary bg-gradient ml-0 py-3">  
       <div class="row">  
           <div class="col-12 text-center">  
               <h2 class="text-white py-2">Manage User Role</h2>  
           </div>  
       </div>  
   </div>  
   <div class="card-body p-4">  
       <form method="POST" class="row">  
           <input type="hidden" asp-for="User.Id" />  
           <div class="pt-3">  
               <div class="form-floating py-2 col-12">  
                   <input asp-for="User.UserName" readonly class="form-control border-0 shadow" />
                    <label asp-for="User.UserName" class="ms-2"></label>
                </div>  

               <div class="form-floating py-2 col-12">  
                   <select id="Role" asp-for="Role" asp-items="@Model.Roles" class="form-select"></select>  
               </div>  
               <div class="form-floating py-2 col-12">  
                   <select id="User_CompanyId" asp-for="User.CompanyId" asp-items="@Model.Companies" class="form-select" style="display:none"></select>  
               </div>  
           </div>  
           <div class="row mt-3">  
               <div class="col-12 col-md-6  col-lg-3 mb-3 mb-md-0  ">  
                   <button type="submit" class="btn btn-primary form-control">Update</button>  
               </div>  
               <div class="col-12 col-md-6 col-lg-3 mb-3 mb-md-0  ">  
                   <a asp-action="Index" class="btn btn-secondary border form-control">Back to list</a>  
               </div>  
           </div>  
       </form>  

   </div>  
</div>  

@section Scripts {  
   <partial name="_ValidationScriptsPartial"></partial>  
   <script>  
       $(document).ready(function () {  
           const $roleSelect = $('#Role');  
           const $companyIdInput = $('#User_CompanyId');  

           $roleSelect.change(function () {  
               const selectedRole = $roleSelect.find('option:selected').val();  
               if (selectedRole === "Company") {  
                   $companyIdInput.show();  
               } else {  
                   $companyIdInput.hide();  
               }  
           });  

           // Trigger change  to ensure correct initial state  
           $roleSelect.trigger('change');  
       });  
   </script>  
}